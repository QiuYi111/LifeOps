# ğŸ¤– LifeOps: Github Action Based Time Management

<div align="center">

**" ä¸“ä¸ºè¿æ—¶é—´éƒ½æ‡’å¾—è‡ªå·±å®‰æ’çš„æ‡’ç‹—è®¾è®¡."**

</div>

-----

## ğŸ“– ç®€ä»‹

**LifeOps** æ˜¯ä¸€ä¸ªåŸºäº **GitOps** ç†å¿µçš„æ— å¤´ä¸ªäººæ—¥ç¨‹ç®¡ç†ç³»ç»Ÿã€‚

åœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œ**ä»¥GITä»“åº“ä¸ºå‡†**ã€‚æ‰€æœ‰çš„æ—¥ç¨‹æ•°æ®éƒ½ä»¥ JSON æ ¼å¼å­˜å‚¨åœ¨ç§æœ‰ä»“åº“ä¸­ã€‚ä½ ä¸éœ€è¦æ‰“å¼€å¤æ‚çš„æ—¥å†åº”ç”¨ï¼Œåªéœ€è¦åœ¨ **é£ä¹¦ ** ä¸­ä¸ AI æœºå™¨äººå¯¹è¯ï¼Œå®ƒå°±ä¼šåˆ©ç”¨ **GitHub Actions** çš„è¾¹ç¼˜è®¡ç®—èƒ½åŠ›ï¼Œé©±åŠ¨ **Claude Code + GLM4.6** è¿›è¡Œæ™ºèƒ½å†³ç­–ã€å†²çªæ£€æµ‹å’Œæ—¥ç¨‹æ’æœŸï¼Œå¹¶æœ€ç»ˆé€šè¿‡é£ä¹¦æœºå™¨äºº **é‚€è¯·åŒæ­¥** åˆ°ä½ çš„æ—¥å†ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ—£ï¸ è‡ªç„¶è¯­è¨€äº¤äº’**ï¼šç›´æ¥å¯¹æœºå™¨äººè¯´ *"æ˜æ—© 9 ç‚¹æœ‰æ·±åº¦å·¥ä½œï¼Œåˆ«è®©äººæ‰“æ‰°"*ï¼Œè‡ªåŠ¨è¯†åˆ«æ—¶é—´ä¸æ„å›¾ã€‚
- **ğŸ§  æ™ºèƒ½å†²çªä»²è£**ï¼šä¸ªæ€§åŒ– Claude Code æŒ‡ä»¤ï¼Œè‡ªåŠ¨ä¿æŠ¤ **P0 (ç”Ÿå­˜)** å’Œ **P1 (æ·±åº¦å·¥ä½œ)** ä»»åŠ¡ï¼Œæ‹’ç»ä½ä¼˜å…ˆçº§æ‰“æ‰°ã€‚
- **â˜ï¸ é›¶è¿ç»´æˆæœ¬**ï¼šå®Œå…¨åŸºäº Serverless (GitHub Actions + Sealos/Laf)ï¼Œæ— æœåŠ¡å™¨ç»´æŠ¤çƒ¦æ¼ã€‚
- **ğŸ”’ æ•°æ®å®Œå…¨ç§æœ‰**ï¼šæ‰€æœ‰æ—¥ç¨‹æ•°æ®å­˜å‚¨åœ¨ç§æœ‰ GitHub ä»“åº“çš„ JSON æ–‡ä»¶ä¸­ï¼Œå†å²ç‰ˆæœ¬å¯å›æº¯ã€‚

-----

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ (Architecture)

```mermaid
graph LR
    User["ğŸ‘¤ User (Feishu)"] -->|Chat| Gateway["âš¡ Sealos/Laf"]
    Gateway -->|Intent| Action["ğŸ™ GitHub Actions"]
    
    subgraph "Serverless Backend"
        Action -->|Think| Claude["ğŸ§  Claude Code"]
        Claude -->|Write| Git["ğŸ“ schedule.json"]
        Action -->|Diff & Sync| PyScript["ğŸ Python SDK Bot"]
    end
    
    PyScript -->|API| FeishuCal["ğŸ“… Feishu Calendar"]
    PyScript -->|Card Msg| User
    FeishuCal -.->|Invite| User
```

-----

## ğŸš€ éƒ¨ç½²æŒ‡å— (Deployment)

### å‰ç½®å‡†å¤‡

1.  **GitHub è´¦å·**ï¼šç”¨äºæ‰˜ç®¡ä»£ç å’Œè¿è¡Œ Actionã€‚
2.  **é£ä¹¦ä¼ä¸šè‡ªå»ºåº”ç”¨**ï¼šç”¨äºæœºå™¨äººäº¤äº’å’Œæ—¥å†æ“ä½œã€‚
3.  **Sealos (æˆ– Laf) è´¦å·**ï¼šç”¨äºæ­å»ºè½»é‡çº§ Webhook ç½‘å…³ã€‚
4.  **Claude (æˆ– Zhipu)** API Keyï¼šç”¨äºé©±åŠ¨ AI å¤§è„‘ã€‚

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä»“åº“

1.  Fork æœ¬ä»“åº“æˆ–ä½¿ç”¨ Template åˆ›å»ºæ–°ä»“åº“ã€‚
2.  âš ï¸ **é‡è¦**ï¼šåŠ¡å¿…å°†ä»“åº“è®¾ä¸º **Private (ç§æœ‰)**ï¼Œä»¥ä¿æŠ¤æ‚¨çš„æ—¥ç¨‹éšç§ã€‚

### ç¬¬äºŒæ­¥ï¼šé…ç½®é£ä¹¦åº”ç”¨

1.  å‰å¾€ [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/) åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨ã€‚
2.  **æ·»åŠ èƒ½åŠ›**ï¼šå¼€å¯â€œæœºå™¨äººâ€ã€‚
3.  **æƒé™ç®¡ç†**ï¼šå¼€é€šä»¥ä¸‹æƒé™å¹¶**å‘å¸ƒç‰ˆæœ¬**ï¼š
    - `im:messages` (æ¥æ”¶æ¶ˆæ¯)
    - `im:messages:read` (è¯»å–æ¶ˆæ¯)
    - `calendar:calendar` (è·å–æ—¥å†ä¿¡æ¯)
    - `calendar:calendar.event` (æ—¥ç¨‹å¢åˆ æ”¹)
4.  è®°å½• `App ID` å’Œ `App Secret`ã€‚

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½² Sealos ç½‘å…³

1.  ç™»å½• Sealos/Lafï¼Œæ–°å»ºäº‘å‡½æ•° `feishu-bridge`ã€‚
2.  å¤åˆ¶ `gateway/feishu-bridge.js` çš„ä»£ç åˆ°äº‘å‡½æ•°ã€‚
3.  é…ç½®äº‘å‡½æ•°ç¯å¢ƒå˜é‡ï¼š
    - `FEISHU_APP_ID`: ä½ çš„é£ä¹¦ App ID
    - `FEISHU_APP_SECRET`: ä½ çš„é£ä¹¦ App Secret
    - `FEISHU_ENCRYPT_KEY`: (å¯é€‰) é£ä¹¦äº‹ä»¶è®¢é˜…çš„åŠ å¯† Key
    - `GITHUB_TOKEN`: GitHub Personal Access Token (æƒé™éœ€åŒ…å« `repo`)
    - `GITHUB_REPO`: `ä½ çš„ç”¨æˆ·å/ä»“åº“å`
4.  å‘å¸ƒå‡½æ•°ï¼Œè·å– URLã€‚
5.  å›åˆ°é£ä¹¦å¼€æ”¾å¹³å° -> **äº‹ä»¶è®¢é˜…**ï¼Œå¡«å…¥è¯¥ URLï¼Œå¹¶è®¢é˜… `æ¥æ”¶æ¶ˆæ¯ v2.0` äº‹ä»¶ã€‚

### ç¬¬å››æ­¥ï¼šé…ç½® GitHub Secrets

åœ¨ GitHub ä»“åº“ -> Settings -> Secrets and variables -> Actions ä¸­æ·»åŠ ï¼š

| Secret Name | è¯´æ˜ |
| :--- | :--- |
| `ZHIPU_API_KEY` | LLM å¯†é’¥ (æ¨èæ™ºè°±ï¼Œå…¼å®¹ Claude åè®®) |
| `FEISHU_APP_ID` | é£ä¹¦åº”ç”¨ ID |
| `FEISHU_APP_SECRET` | é£ä¹¦åº”ç”¨ Secret |
| `FEISHU_USER_ID` | æ‚¨çš„é£ä¹¦ **Open ID** (ç”¨äºæœºå™¨äººæ‹‰ä½ è¿›æ—¥ç¨‹) |
| `FEISHU_CALENDAR_ID`| (å¯é€‰) æŒ‡å®šæ—¥å† IDï¼Œä¸å¡«åˆ™é»˜è®¤ä¸ºæœºå™¨äººçš„ `primary` æ—¥å† |

> **å¦‚ä½•è·å– `FEISHU_USER_ID`?**
> éƒ¨ç½²å¥½ Sealos åï¼Œåœ¨é£ä¹¦ç»™æœºå™¨äººéšä¾¿å‘ä¸€æ¡æ¶ˆæ¯ï¼ŒæŸ¥çœ‹ Sealos å‡½æ•°æ—¥å¿—ï¼Œæ—¥å¿—ä¸­ä¼šæ‰“å° `Sender ID`ï¼Œå³ä¸ºæ‚¨çš„ Open ID (é€šå¸¸ä»¥ `ou_` å¼€å¤´)ã€‚

-----

## ğŸ—£ï¸ ä½¿ç”¨æ‰‹å†Œ (Usage)

### 1. æŸ¥è¯¢æ—¥ç¨‹

ç›´æ¥è¯¢é—®æœºå™¨äººï¼ŒSealos ç½‘å…³ä¼šæ‹¦æˆªæŸ¥è¯¢è¯·æ±‚ï¼ˆä¸æ¶ˆè€— GitHub Action èµ„æºï¼‰ï¼Œå¿«é€Ÿè¿”å›ã€‚

> "çœ‹çœ‹ä»Šå¤©çš„å®‰æ’"
> "ä¸‹å‘¨æœ‰ä»€ä¹ˆæ—¥ç¨‹ï¼Ÿ"

### 2. ç®¡ç†æ—¥ç¨‹

å‘é€åŒ…å«ä¿®æ”¹æ„å›¾çš„æŒ‡ä»¤ï¼Œè§¦å‘ Claude Code æ€è€ƒä¸ Git å†™å…¥ã€‚

> "æ˜å¤©ä¸Šåˆ 10 ç‚¹åŠ ä¸ªä¼šï¼Œè®¨è®ºæ¶æ„è®¾è®¡"
> "æŠŠå‘¨äº”ä¸‹åˆçš„ P3 ä»»åŠ¡éƒ½åˆ æ‰"
> "åˆå§‹åŒ–ä¸‹å‘¨æ—¥ç¨‹ï¼šå‘¨ä¸€æ—©8ç‚¹å¼€ä¼šï¼Œå‘¨äºŒæ™š6ç‚¹å¥èº«"

### 3. æ‰‹åŠ¨åŒæ­¥ (Diff Sync)

å¦‚æœå‘ç°é£ä¹¦æ—¥å†ä¸ Git ä¸ä¸€è‡´ï¼Œå¯ä»¥å¼ºåˆ¶è§¦å‘åŒæ­¥ã€‚

> "åŒæ­¥æ—¥ç¨‹"

-----

## âš™ï¸ è¿›é˜¶é…ç½®

### è°ƒæ•´ AI æŒ‡ä»¤ (`config/instructions.xml`)

è¿™æ˜¯ AI çš„è¡Œä¸ºå‡†åˆ™ã€‚æ‚¨å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­å®šä¹‰ï¼š

- **ä¼˜å…ˆçº§çŸ©é˜µ**ï¼šå®šä¹‰ä»€ä¹ˆæ˜¯ P0 (ä¸å¯ç§»åŠ¨)ã€P1 (æ·±åº¦å·¥ä½œ)ã€‚
- **ä½œæ¯åå¥½**ï¼šä¾‹å¦‚ *"Morning Block: 09:00-11:00 ç¦æ­¢å®‰æ’ä¼šè®®"*ã€‚

### è°ƒæ•´åŒæ­¥ç­–ç•¥ (`scripts/feishu_bot.py`)

- `HISTORY_DAYS`: è‡ªåŠ¨æ¸…ç†å¤šä¹…ä»¥å‰çš„å†å²æ•°æ® (é»˜è®¤ 30 å¤©)ã€‚
- `SYNC_FUTURE_DAYS`: åŒæ­¥æœªæ¥å¤šå°‘å¤©çš„æ—¥ç¨‹ (é»˜è®¤ 90 å¤©)ã€‚

-----

## ğŸ›  æŠ€æœ¯æ ˆä¸ä¾èµ–

* **Runtime**: Python 3.10+
* **Dependencies**:
    * `lark-oapi`: é£ä¹¦å®˜æ–¹ SDKï¼Œç”¨äºç¨³å¥çš„æ—¥å†æ“ä½œã€‚
    * `requests`:ç”¨äºè½»é‡çº§ API è°ƒç”¨ã€‚
* **CI/CD**: GitHub Actions (Ubuntu Latest)

-----

## ğŸ“„ License

Distributed under the MIT License. See `LICENSE` for more information.

-----

*Created with â¤ï¸ by Jingyi*
